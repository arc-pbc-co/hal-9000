{
  "project": "HAL-9000 Refactor",
  "branchName": "ralph/orchestrator",
  "description": "Orchestrator Agent - Coordinates all phase agents and tracks overall refactor progress",
  "userStories": [
    {
      "id": "ORCH-001",
      "title": "Create phase dependency validator",
      "description": "As an orchestrator, I need to validate phase dependencies before allowing a phase to start.",
      "acceptanceCriteria": [
        "Create orchestrator/validator.py with validate_phase_deps() function",
        "Function reads all phase prd.json files",
        "Returns True only if prerequisite phases have all stories passing",
        "Phase 1 has no prerequisites",
        "Phase 2 requires Phase 1 complete",
        "Phase 3 requires Phase 2 complete",
        "Phase 4 requires Phase 3 complete",
        "Phase 5 requires Phase 4 complete",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "ORCH-002",
      "title": "Create progress aggregator",
      "description": "As a project manager, I want to see overall refactor progress across all phases.",
      "acceptanceCriteria": [
        "Create orchestrator/progress.py with aggregate_progress() function",
        "Reads all phase prd.json files",
        "Returns dict with: total_stories, completed_stories, percent_complete, phase_breakdown",
        "Phase breakdown shows each phase's completion status",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "ORCH-003",
      "title": "Create CLI for orchestrator",
      "description": "As a developer, I want CLI commands to check status and run phases.",
      "acceptanceCriteria": [
        "Create orchestrator/cli.py with Click commands",
        "Command: orchestrate status - shows progress across all phases",
        "Command: orchestrate run <phase> - runs specified phase agent",
        "Command: orchestrate validate <phase> - checks if phase can start",
        "Pretty output using Rich tables",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "ORCH-004",
      "title": "Create phase completion hooks",
      "description": "As an orchestrator, I need to perform actions when a phase completes.",
      "acceptanceCriteria": [
        "Create orchestrator/hooks.py with on_phase_complete() function",
        "Creates git commit with phase summary",
        "Updates main AGENTS.md with completion timestamp",
        "Notifies which phase should run next",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    }
  ]
}
