{
  "project": "HAL-9000 Refactor",
  "branchName": "ralph/phase-4-ui",
  "description": "Phase 4: Research Canvas UI - React web interface with visual workspace",
  "userStories": [
    {
      "id": "P4-001",
      "title": "Initialize React project with Vite",
      "description": "As a developer, I need a modern React project setup.",
      "acceptanceCriteria": [
        "Create ui/ directory with Vite + React + TypeScript",
        "Add Tailwind CSS for styling",
        "Add React Router for navigation",
        "Configure proxy to gateway WebSocket",
        "npm run dev starts development server",
        "npm run build creates production build",
        "Typecheck passes (tsc --noEmit)"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-002",
      "title": "Create gateway WebSocket hook",
      "description": "As a React component, I need to communicate with the gateway.",
      "acceptanceCriteria": [
        "Create ui/src/hooks/useGateway.ts",
        "Hook manages WebSocket connection lifecycle",
        "Methods: connect(), disconnect(), sendMessage(msg), subscribe(type, callback)",
        "Auto-reconnect on disconnect",
        "Exposes connection status",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-003",
      "title": "Create session state management",
      "description": "As a user, I need my research session state tracked.",
      "acceptanceCriteria": [
        "Create ui/src/stores/sessionStore.ts using Zustand",
        "State: sessionId, researchContext, conversationHistory, activeTools",
        "Actions: setSession, updateContext, addMessage, clearSession",
        "Persists to localStorage",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-004",
      "title": "Create main app layout",
      "description": "As a user, I want a three-panel research interface.",
      "acceptanceCriteria": [
        "Create ui/src/App.tsx with main layout",
        "Left panel: Navigation + Literature",
        "Center panel: Research Canvas",
        "Right panel: Chat + ADAM Controls",
        "Responsive layout with collapsible panels",
        "Dark theme (research lab aesthetic)",
        "Typecheck passes",
        "Verify in browser: layout displays correctly"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-005",
      "title": "Create chat panel component",
      "description": "As a researcher, I want to chat with HAL-9000.",
      "acceptanceCriteria": [
        "Create ui/src/components/Chat/ChatPanel.tsx",
        "Message list with user/assistant styling",
        "Input field with send button",
        "Streaming response display",
        "Auto-scroll to latest message",
        "Typecheck passes",
        "Verify in browser: can send and receive messages"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-006",
      "title": "Install and configure ReactFlow",
      "description": "As a developer, I need ReactFlow for the visual canvas.",
      "acceptanceCriteria": [
        "Install reactflow package",
        "Create ui/src/components/Canvas/ResearchCanvas.tsx",
        "Basic canvas with pan/zoom controls",
        "Background grid pattern",
        "MiniMap component",
        "Typecheck passes",
        "Verify in browser: canvas renders and is interactive"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-007",
      "title": "Create paper node component",
      "description": "As a researcher, I want to see papers as nodes on the canvas.",
      "acceptanceCriteria": [
        "Create ui/src/components/Canvas/NodeTypes/PaperNode.tsx",
        "Displays: title, authors, year, abstract snippet",
        "Color-coded by topic/category",
        "Double-click opens paper details",
        "Draggable and connectable",
        "Typecheck passes",
        "Verify in browser: paper nodes render and are interactive"
      ],
      "priority": 7,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-008",
      "title": "Create material node component",
      "description": "As a researcher, I want to see materials as nodes.",
      "acceptanceCriteria": [
        "Create ui/src/components/Canvas/NodeTypes/MaterialNode.tsx",
        "Displays: material name, formula, key properties",
        "Links to related papers",
        "Typecheck passes",
        "Verify in browser: material nodes render correctly"
      ],
      "priority": 8,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-009",
      "title": "Create ADAM prompt node component",
      "description": "As a researcher, I want generated ADAM prompts on the canvas.",
      "acceptanceCriteria": [
        "Create ui/src/components/Canvas/NodeTypes/ADAMPromptNode.tsx",
        "Displays: prompt type, objective, target cell, status",
        "Status colors: draft (gray), ready (blue), sent (yellow), complete (green), failed (red)",
        "Click to preview full prompt",
        "Button to send to ADAM",
        "Typecheck passes",
        "Verify in browser: ADAM nodes render and show status"
      ],
      "priority": 9,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-010",
      "title": "Create ADAM control panel",
      "description": "As a researcher, I want to control ADAM from the UI.",
      "acceptanceCriteria": [
        "Create ui/src/components/ADAM/ADAMPanel.tsx",
        "Shows production cell status (metal, ceramic, polymer)",
        "Lists pending prompts",
        "Execution history log",
        "Button to generate new prompt from selection",
        "Typecheck passes",
        "Verify in browser: ADAM panel displays and updates"
      ],
      "priority": 10,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-011",
      "title": "Create literature search panel",
      "description": "As a researcher, I want to search for papers.",
      "acceptanceCriteria": [
        "Create ui/src/components/Literature/SearchPanel.tsx",
        "Search input with filters (source, date, topic)",
        "Results list with paper cards",
        "Drag papers to canvas to add as nodes",
        "Typecheck passes",
        "Verify in browser: search works and results display"
      ],
      "priority": 11,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-012",
      "title": "Connect canvas to gateway",
      "description": "As a researcher, I want canvas actions to trigger gateway operations.",
      "acceptanceCriteria": [
        "Canvas subscribes to gateway events",
        "New documents → auto-create paper nodes",
        "ADAM prompts generated → auto-create prompt nodes",
        "Node selection → available in chat context",
        "Typecheck passes",
        "Verify in browser: gateway events update canvas"
      ],
      "priority": 12,
      "passes": false,
      "notes": ""
    },
    {
      "id": "P4-013",
      "title": "Add UI start command to CLI",
      "description": "As a developer, I want to start the UI from the command line.",
      "acceptanceCriteria": [
        "Add 'hal ui start' command to CLI",
        "Starts gateway if not running",
        "Starts Vite dev server (or serves build in production)",
        "Opens browser to UI URL",
        "Typecheck passes (Python)",
        "Manual verification: 'hal ui start' launches UI"
      ],
      "priority": 13,
      "passes": false,
      "notes": ""
    }
  ]
}
